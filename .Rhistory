dir()
setwd("./Notes/Week 3/")
dir()
chicago <- readRDS("chicago.rds")
dimm(chicago)
dim(chicago)
str(chicago)
names(chicago)
head(select(chicago, city:dptp))
dplyr
library(dplyr)
dplyr
select
head(select(chicago, city:dptp))
head(select(chicago, -(city:dptp)))
chic.f <- filter(chicago, pm25tmean2 > 30)
head(chic.f, 10)
chic.f <- filter(chicago, pm25tmean2 > 30 & tmpd > 80)
head(chic.f)
chicago <- arrange(chicago, date)
head(chicago)
chicago <- arrange(chicago, desc(date))
head(chicago)
chicago <- rename(chicago, pm25 = pm25tmean2, dewpoint = dptp)
head(chicago)
chicago <- mutate(chicago, pm25detrend = pm25-mean(pm25, na.rm = TRUE))
head(select(chicago, pm25, pm25detrend))
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot")))
hotcold <- group_by(chicago, tempcat)
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot")))
hotcold <- group_by(chicago, tempcat)
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot")))
hotcold <- group_by(chicago, tempcat)
chicago$tempcat
is.na(chicago$tempcat)
sum(is.na(chicago$tempcat))
which(is.na(chicago$tempcat))
chicago$tempcat[1037]
chicago[1037]
chicago[, 1037]
chicago[1037, ]
chicago[1036, ]
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot"), na.rm = TURE))
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot"), na.rm = TRUE))
?factor
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot"), exclude = NA))
hotcold <- group_by(chicago, tempcat)
chicago[1037, ]
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot")))
chicago[1037, ]
?group_by
chicago[1037, ]
remove(chicago[1037, ])
chicago[-1037, ]
hotcold <- group_by(chicago, tempcat)
chicago$tempcat[1037]
hotcold <- group_by(chicago, tempcat, na.rm = TRUE)
hotcold <- group_by(chicago, tempcat, forcats::fct_explicit_na)
readRDS("chicago.rds")[1037, ]
chicago[1037, ]
is.na(readRDS("chicago.rds")$tmpd)
sum(is.na(readRDS("chicago.rds")$tmpd))
chicago$tmpd[1037]
chicago$tmpd[1037] <- 30
chicago$tmpd[1037]
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot")))
hotcold <- group_by(chicago, tempcat)
hotcold
summarise(hotcold, pm25 = mean(pm25), o3 = max(o3tmean2), no2 = median(no2tmean2))
chicago$tmpd[1037]
chicago[1037, ]
chicago[1037, ] <- NA
chicago[1037, ]
chicago <- readRDS("chicago.rds")
chicago <- arrange(chicago, date)
chicago <- arrange(chicago, desc(date))
chicago <- rename(chicago, pm25 = pm25tmean2, dewpoint = dptp)
chicago <- mutate(chicago, pm25detrend = pm25-mean(pm25, na.rm = TRUE))
chicago <- mutate(chicago, tempcat = factor(1 * (tmpd > 80), labels = c("cold", "hot")))
hotcold <- group_by(chicago, tempcat)
hotcold
summarise(hotcold, pm25 = mean(pm25), o3 = max(o3tmean2), no2 = median(no2tmean2))
summarise(hotcold, pm25 = mean(pm25, na.rm = TRUE), o3 = max(o3tmean2), no2 = median(no2tmean2))
chicago <- mutate(chicago, year = as.POSIXlt(date)$year + 1900)
#use the mutate() function to create a year variable
#extract the year from the date with as.POSIXlt()
years <- group_by(chicago, year)
summarise(years, pm25 = mean(pm25, na.rm = TRUE), o3 = max(o3tmean2), no2 = median(no2tmean2))
chicago %>% mutate(month = as.POSIXlt(date)$mon + 1) %>% group_by(month) %>% summarise(pm25 = mean(pm25, na.rm = TRUE), o3 = max(o3tmean2), no2 = median(no2tmean2))
if(!file.exists("./data")){dir.create("./data")}
fileUrl1 <- "https://dl.dropboxusercontent.com/u/7710864/data/reviews-apr29.csv"
fileUrl2 <- "https://dl.dropboxusercontent.com/u/7710864/data/solutions-apr29.csv"
download.file(fileUrl1, destfile = "./data/reviews.csv", method = "curl")
download.file(fileUrl2, destfile = "./data/solutions.csv", method = "curl")
reviews <- read.csv("./data/reviews.csv")
solutions <- read.csv("./dat/solutions.csv")
reviews <- read.csv("./data/reviews.csv")
solutions <- read.csv("./dat/solutions.csv")
solutions <- read.csv("./data/solutions.csv")
head(reviews, 2)
head(solutions, 2)
solutions
read.csv("./data/solutions.csv")
df1 = data.frame(id = sample(1:10), x = rnorm(10))
df2 =data.frame(id = sample(1:10), y = rnorm(10))
arrange(join(df1, df2), id)
library("plyr")
df1 = data.frame(id = sample(1:10), x = rnorm(10))
df2 =data.frame(id = sample(1:10), y = rnorm(10))
arrange(join(df1, df2), id)
detach_package(plyr)
detach("package:plyr", unload = TRUE)
detach("package:dplyr", unload = TRUE)
library("plyr")
library("dplyr")
df1 = data.frame(id = sample(1:10), x = rnorm(10))
df2 = data.frame(id = sample(1:10), y = rnorm(10))
df3 = data.frame(id = sample(1:10), z = rnorm(10))
dfList = list(df1, df2, df3)
join_all(dfList)
swirl()
library(swirl)
swirl()
read.csv(path2csv, stringsAsFactors = FALSE)
mydf <- read.csv(path2csv, stringsAsFactors = FALSE)
dim(mydf)
head(mydf)
library(dplyr)
packageVersion("dplyr")
cran <- tbl_df(mydf)
rm("mydf")
cran
?select
select(cran, ip_id, package, country)
5:20
select(cran, r_arch:country)
select(cran, country:r_arch)
cran
select(cran, -time
)
-5:20
-(5:20)
names(cran)
select(cran, -(X:size))
filter(cran, package == "swirl")
filter(cran, r_version == "3.1.1", country == "US")
?Comparison
filter(cran, r_version <= "3.1.1", country == "IN")
filter(cran, r_version <= "3.0.2", country == "IN")
filter(cran, country == "US" | country == "IN")
filter(cran, size > 100500, r_os == "linux-gnu")
is.na(c(3, 5, Na, 10))
is.na(c(3, 5, NA, 10))
!is.na(c(3, 5, NA, 10))
filter(cran, !is.na(r_version))
cran2 <- select(cran, size:ip_id)
arrange(cran2, ip_id)
arrange(cran2, desc(ip_id))
arrange(cran2, package, ip_id)
arrange(cran2, country, desc(r_version), ip_id)
select(cran, ip_id, package, size)
cran3 <- select(cran, ip_id, package, size)
cran3
mutate(cran3, size_mb = size / 2^20)
mutate(cran3, size_mb = size / 2^20, size_gb = size_mg / 2^10)
mutate(cran3, size_mb = size / 2^20, size_gb = size_mb / 2^10)
mutate(cran3, correct_size = correct_size - 1000)
mutate(cran3, correct_size = size - 1000)
mutate(cran3, correct_size = size + 1000)
summarize(cran, avg_bytes = mean(size))
library(dplyr)
cran <- tbl_df(mydf)
rm("mydf")
cran
?group_by
by_package <- group_by(cran, package)
by_package
summarise(by_package, mean(size))
?n
n()
n(cran)
n(cran, packages)
n(cran$X)
?n_distinct
submit
submit
submit()
?n
submit()
summarise(by_package)
summarise(by_package, n())
summarise(by_package, count = n())
summarise(by_package, count = n(by_package))
summarise(by_package, count = n())
by_packageg
by_package
?summarise_
?summarise
summarise(cran, count = n())
library("dplyr")
summarise(cran, count = n())
library("plyr")
summarise(cran, count = n())
submit()
pack_sum
quantile(pack_sum$count, probs = 0.99)
